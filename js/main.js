(function(){
  const i18n = {
    es: {
      nav_mentoring: 'Mentoría',
      nav_press: 'Prensa',
      nav_papers: 'Papers',
      nav_rd: 'I+D',
      nav_lab: 'Lab',

      hero_title: 'Doctor en Ingeniería de Sistemas Complejos.',
      hero_sub: 'Investigación y datos para entender el movimiento humano en el mundo real.',
      hero_bio: 'Soy Raimundo Sanchez, Doctor en Ingeniería de Sistemas Complejos. Soy Research Fellow en The University of Queensland (Brisbane, Australia) y trabajo en investigación aplicada en wearables y analítica del movimiento humano en condiciones reales. Me especializo en validación y benchmarking fuera del laboratorio, diseño de estudios y modelado longitudinal para convertir señales ruidosas en evidencia defendible. Antes lideré Revenue Analytics en LATAM Airlines, construyendo productos de apoyo a decisiones a escala. También soy fundador de Metric Trails.',
      hero_cred: 'Research Fellow, The University of Queensland (Brisbane, Australia). Fundador de Metric Trails.',
      hero_cta_mentoring: 'Mentoría 1:1',
      hero_cta_rd: 'Hablemos de I+D',

      mentoring_title: 'Mentoría 1:1',
      mentoring_subtitle: 'Elige el track que mejor calza con tu perfil y agenda una mentoría enfocada en resultados concretos.',

      tech_label: 'Track Técnico',
      tech_title: 'Para profesionales de Data y Analytics que quieran aclarar su próximo paso',
      tech_body: 'Si dominas lo técnico pero quieres más influencia y proyección, este track te ayuda a definir tu próximo movimiento: seniority, cambio de rol (por ejemplo BI a Data Science) o transición a liderazgo.',
      tech_link: 'Ver detalle ->',

      exec_label: 'Track Ejecutivo',
      exec_title: 'Para líderes de negocio que quieren tomar mejores decisiones en Data y AI',
      exec_body: 'Para ejecutivos que trabajan con data y AI y necesitan separar señal de humo. Te ayuda a liderar equipos técnicos, evaluar proveedores, y conducir iniciativas impulsadas por datos con criterio.',
      exec_link: 'Ver detalle ->',

      press_title: 'Prensa',
      press_subtitle: 'Apariciones y entrevistas seleccionadas.',

      abc_desc: 'Sobre estándares para medir trail running: distancia, desnivel y comparabilidad entre recorridos.',
      abc_cta: 'Ver nota',

      uai_title: 'Football Analytics y el uso de la data en los deportes',
      uai_desc: 'Conversación sobre cómo convertir datos en decisiones deportivas y mejorar rendimiento con evidencia.',
      uai_cta: 'Ver artículo',

      om_title: 'Ingeniero/Data Science - Científico del trail running en Australia y Chile',
      om_desc: 'Entrevista sobre trayectoria, ciencia de datos aplicada y trabajo en trail running entre Australia y Chile.',
      om_cta: 'Ver entrevista',

      papers_title: 'Papers seleccionados',
      papers_sub: 'Seis publicaciones que representan mi trabajo en wearables, medición en terreno y analítica aplicada. Lista completa en Google Scholar.',
      papers_full: 'Ver lista completa',

      p1_why: 'Valida estimaciones de desnivel acumulado usando distintos wearables y pipelines de post-proceso en terreno montañoso.',
      p2_why: 'Detecta y modela transiciones de marcha/carrera en subida usando wearables, con foco en dinámica real de trail.',
      p3_why: 'Cuantifica cómo la resolución del DEM cambia el desnivel estimado en trail running y define implicancias prácticas.',
      p4_why: 'Muestra cómo la complejidad fractal distorsiona distancia y desnivel, y argumenta por estándares de medición comparables.',
      p5_why: 'Propone un framework geoespacial multimodal para mapear terreno montañoso con precisión útil para investigación de locomoción.',
      p6_why: 'Relaciona carga de entrenamiento, HRV, fatiga, sueño y lesión en atletas durante un mesociclo, con datos longitudinales.',

      rd_title: 'I+D en wearables y analítica del movimiento',
      rd_subtitle: 'Trabajo con equipos de producto e investigación para transformar señales ruidosas en evidencia defendible y decisiones claras.',
      rd_b1: 'Validación y benchmarking en condiciones reales (fuera del laboratorio)',
      rd_b2: 'Diseño de estudios, métricas y protocolos reproducibles',
      rd_b3: 'Modelado longitudinal, fusión de sensores y pipelines de señales',
      rd_formats_title: 'Formatos típicos',
      rd_formats_body: 'Audit, advisory, o implementación por sprint. Alcance y tiempos se ajustan al problema.',
      rd_formats_note: '(Esto se puede pulir después con precios o paquetes, si te interesa.)',
      rd_cta: 'Escríbeme',
      rd_contact: 'Para colaborar o contratarme: escríbeme a raimundosanchezu@gmail.com o conectemos por LinkedIn.',

      lab_title: 'Lab',
      lab_sub: 'Proyectos y prototipos.',
      lab_cta: 'Ir a GitHub',

      footer_more: 'Más links',
      footer_elsewhere: 'En otros lugares',

      meta_title: 'Raimundo Sanchez | I+D en wearables y analítica del movimiento + mentoría',
      meta_desc: 'Doctor en Ingeniería de Sistemas Complejos. Investigación aplicada en wearables y analítica del movimiento humano en el mundo real. Mentoría 1:1 en Data y Analytics.'
    },
    en: {
      nav_mentoring: 'Mentoring',
      nav_press: 'Press',
      nav_papers: 'Papers',
      nav_rd: 'R&D',
      nav_lab: 'Lab',

      hero_title: 'PhD in Complex Systems Engineering.',
      hero_sub: 'Research and data to understand human movement in the real world.',
      hero_bio: 'I am Raimundo Sanchez, PhD in Complex Systems Engineering. I am a Research Fellow at The University of Queensland (Brisbane, Australia), working on applied research in wearables and human movement analytics in real-world settings. I specialize in field validation and benchmarking, study design, and longitudinal modeling to turn noisy signals into defensible evidence. Previously, I led Revenue Analytics at LATAM Airlines, building decision-support products at scale. I am also the founder of Metric Trails.',
      hero_cred: 'Research Fellow, The University of Queensland (Brisbane, Australia). Founder of Metric Trails.',
      hero_cta_mentoring: '1:1 Mentoring',
      hero_cta_rd: 'R&D consulting',

      mentoring_title: '1:1 Mentoring',
      mentoring_subtitle: 'Choose the track that fits your profile and book a session focused on concrete outcomes.',

      tech_label: 'Technical track',
      tech_title: 'For data and analytics professionals who want clarity on their next step',
      tech_body: 'If you have strong technical skills but want more influence and trajectory, this track helps you define your next move: seniority, role change (eg BI to Data Science), or transition into leadership.',
      tech_link: 'See details ->',

      exec_label: 'Executive track',
      exec_title: 'For business leaders who want better decisions in data and AI',
      exec_body: 'For leaders working with data and AI who need to separate signal from noise. Helps you lead technical teams, evaluate vendors, and drive data-driven initiatives with good judgment.',
      exec_link: 'See details ->',

      press_title: 'Press',
      press_subtitle: 'Selected media and interviews.',

      abc_desc: 'On trail running measurement standards: distance, elevation gain, and comparability across courses.',
      abc_cta: 'Read article',

      uai_title: 'Football analytics and the use of data in sports',
      uai_desc: 'A conversation on turning data into sports decisions and improving performance with evidence.',
      uai_cta: 'Read article',

      om_title: 'Engineer / Data Science - Trail running researcher in Australia and Chile',
      om_desc: 'Interview about my path, applied data science, and trail running work across Australia and Chile.',
      om_cta: 'Watch interview',

      papers_title: 'Selected papers',
      papers_sub: 'Six papers that represent my work in wearables, field measurement, and applied analytics. Full list on Google Scholar.',
      papers_full: 'Full list',

      p1_why: 'Validates elevation gain estimates across common wearables and processing pipelines in mountainous terrain.',
      p2_why: 'Detects and models walk-run transitions during uphill trail running using wearables, focused on real-world dynamics.',
      p3_why: 'Quantifies how DEM resolution shifts elevation gain estimates in trail running and what that means in practice.',
      p4_why: 'Shows how fractal complexity distorts distance and elevation gain, motivating comparable measurement standards.',
      p5_why: 'Proposes a multimodal geospatial framework to map mountain terrain with precision useful for locomotion research.',
      p6_why: 'Links training load, HRV, fatigue, sleep, and injury across a training mesocycle using longitudinal athlete data.',

      rd_title: 'Wearable R&D and human movement analytics',
      rd_subtitle: 'I work with product and research teams to turn noisy signals into defensible evidence and clear decisions.',
      rd_b1: 'Real-world validation and benchmarking (outside the lab)',
      rd_b2: 'Study design, metrics, and reproducible protocols',
      rd_b3: 'Longitudinal modeling, sensor fusion, and signal pipelines',
      rd_formats_title: 'Typical formats',
      rd_formats_body: 'Audit, advisory, or sprint-based implementation. Scope and timelines adapt to the problem.',
      rd_formats_note: '(We can refine this later with pricing or packages, if useful.)',
      rd_cta: 'Email me',
      rd_contact: 'For collaboration or consulting: email me at raimundosanchezu@gmail.com or connect on LinkedIn.',

      lab_title: 'Lab',
      lab_sub: 'Projects and prototypes.',
      lab_cta: 'Go to GitHub',

      footer_more: 'More links',
      footer_elsewhere: 'Elsewhere',

      meta_title: 'Raimundo Sanchez | Wearable R&D + mentoring',
      meta_desc: 'PhD in Complex Systems Engineering. Applied research in wearables and human movement analytics in real-world settings. 1:1 mentoring in data and analytics.'
    }
  };

  function setMeta(name, content){
    if(!content) return;
    const el = document.querySelector(`meta[name='${name}']`);
    if(el) el.setAttribute('content', content);
  }
  function setOg(prop, content){
    if(!content) return;
    const el = document.querySelector(`meta[property='${prop}']`);
    if(el) el.setAttribute('content', content);
  }

  function applyLang(lang){
    const dict = i18n[lang] || i18n.es;
    document.documentElement.setAttribute('lang', lang === 'en' ? 'en' : 'es');

    // text nodes
    document.querySelectorAll('[data-i18n]').forEach(el=>{
      const key = el.getAttribute('data-i18n');
      if(dict[key] != null){
        el.textContent = dict[key];
      }
    });

    // meta
    document.title = dict.meta_title;
    setMeta('description', dict.meta_desc);
    setOg('og:title', dict.meta_title);
    setOg('og:description', dict.meta_desc);
    const twTitle = document.querySelector("meta[name='twitter:title']");
    if(twTitle) twTitle.setAttribute('content', dict.meta_title);
    const twDesc = document.querySelector("meta[name='twitter:description']");
    if(twDesc) twDesc.setAttribute('content', dict.meta_desc);

    // buttons
    const esBtn = document.getElementById('btn-es');
    const enBtn = document.getElementById('btn-en');
    if(esBtn && enBtn){
      esBtn.setAttribute('aria-pressed', lang === 'es' ? 'true' : 'false');
      enBtn.setAttribute('aria-pressed', lang === 'en' ? 'true' : 'false');
    }

    try{ localStorage.setItem('lang', lang); }catch(e){}
  }

  function init(){
    const saved = (function(){
      try{ return localStorage.getItem('lang'); }catch(e){ return null; }
    })();
    const lang = (saved === 'en' || saved === 'es') ? saved : 'es';

    const esBtn = document.getElementById('btn-es');
    const enBtn = document.getElementById('btn-en');
    if(esBtn) esBtn.addEventListener('click', ()=>applyLang('es'));
    if(enBtn) enBtn.addEventListener('click', ()=>applyLang('en'));

    applyLang(lang);

    const yearEl = document.getElementById('year');
    if(yearEl) yearEl.textContent = String(new Date().getFullYear());
  }

  document.addEventListener('DOMContentLoaded', init);
})();
